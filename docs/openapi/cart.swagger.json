{
  "swagger": "2.0",
  "info": {
    "title": "api/proto/cart/cart.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "CartService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v1/cart": {
      "get": {
        "summary": "获取购物车列表",
        "operationId": "CartService_GetCart",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.GetCartResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "tags": [
          "购物车管理"
        ]
      },
      "delete": {
        "summary": "清空购物车",
        "operationId": "CartService_ClearCart",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.ClearCartResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "tags": [
          "购物车管理"
        ]
      }
    },
    "/api/v1/cart/checkout-preview": {
      "post": {
        "summary": "结算预览（计算价格和优惠）",
        "operationId": "CartService_CheckoutPreview",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.CheckoutPreviewResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cart.v1.CheckoutPreviewRequest"
            }
          }
        ],
        "tags": [
          "购物车管理"
        ]
      }
    },
    "/api/v1/cart/items": {
      "post": {
        "summary": "添加商品到购物车",
        "operationId": "CartService_AddItem",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.AddItemResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cart.v1.AddItemRequest"
            }
          }
        ],
        "tags": [
          "购物车管理"
        ]
      }
    },
    "/api/v1/cart/items/batch-delete": {
      "post": {
        "summary": "批量删除购物车商品",
        "operationId": "CartService_RemoveItems",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.RemoveItemsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cart.v1.RemoveItemsRequest"
            }
          }
        ],
        "tags": [
          "购物车管理"
        ]
      }
    },
    "/api/v1/cart/items/{itemId}": {
      "delete": {
        "summary": "删除购物车商品",
        "operationId": "CartService_RemoveItem",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.RemoveItemResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "parameters": [
          {
            "name": "itemId",
            "description": "购物车项ID",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "购物车管理"
        ]
      }
    },
    "/api/v1/cart/items/{itemId}/quantity": {
      "put": {
        "summary": "更新购物车商品数量",
        "operationId": "CartService_UpdateItemQuantity",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.UpdateItemQuantityResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "parameters": [
          {
            "name": "itemId",
            "description": "购物车项ID",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/cart.v1.CartService.UpdateItemQuantityBody"
            }
          }
        ],
        "tags": [
          "购物车管理"
        ]
      }
    },
    "/api/v1/cart/summary": {
      "get": {
        "summary": "获取购物车统计信息",
        "operationId": "CartService_GetCartSummary",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/cart.v1.GetCartSummaryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/google.rpc.Status"
            }
          }
        },
        "tags": [
          "购物车管理"
        ]
      }
    }
  },
  "definitions": {
    "cart.v1.AddItemRequest": {
      "type": "object",
      "properties": {
        "productId": {
          "type": "string",
          "title": "商品ID（SPU ID）"
        },
        "skuId": {
          "type": "string",
          "title": "SKU ID"
        },
        "quantity": {
          "type": "integer",
          "format": "int32",
          "title": "数量"
        }
      }
    },
    "cart.v1.AddItemResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/cart.v1.CartItem"
        }
      }
    },
    "cart.v1.AddressInfo": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "receiverName": {
          "type": "string"
        },
        "receiverPhone": {
          "type": "string"
        },
        "fullAddress": {
          "type": "string",
          "title": "完整地址"
        }
      }
    },
    "cart.v1.CartItem": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "购物车项ID"
        },
        "userId": {
          "type": "string",
          "title": "用户ID"
        },
        "productId": {
          "type": "string",
          "title": "商品ID（SPU ID）"
        },
        "skuId": {
          "type": "string",
          "title": "SKU ID"
        },
        "productTitle": {
          "type": "string",
          "title": "商品标题"
        },
        "productImage": {
          "type": "string",
          "title": "商品主图"
        },
        "skuName": {
          "type": "string",
          "title": "SKU 名称（规格描述）"
        },
        "price": {
          "type": "string",
          "title": "单价（加购时的价格快照）"
        },
        "currentPrice": {
          "type": "string",
          "title": "当前价格（实时查询）"
        },
        "quantity": {
          "type": "integer",
          "format": "int32",
          "title": "数量"
        },
        "stock": {
          "type": "integer",
          "format": "int32",
          "title": "当前库存"
        },
        "isValid": {
          "type": "boolean",
          "title": "是否有效（上架且有库存）"
        },
        "invalidReason": {
          "type": "string",
          "title": "失效原因（如有）"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "title": "添加时间"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "title": "更新时间"
        }
      }
    },
    "cart.v1.CartService.UpdateItemQuantityBody": {
      "type": "object",
      "properties": {
        "quantity": {
          "type": "integer",
          "format": "int32",
          "title": "新数量"
        }
      }
    },
    "cart.v1.CartSummary": {
      "type": "object",
      "properties": {
        "totalItems": {
          "type": "integer",
          "format": "int32",
          "title": "商品总数（有效商品数量）"
        },
        "totalQuantity": {
          "type": "integer",
          "format": "int32",
          "title": "商品总数量"
        },
        "totalPrice": {
          "type": "string",
          "title": "商品总金额"
        },
        "hasInvalidItems": {
          "type": "boolean",
          "title": "是否有失效商品"
        }
      }
    },
    "cart.v1.CheckoutPreviewData": {
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/cart.v1.CartItem"
          },
          "title": "选中的商品列表"
        },
        "productTotal": {
          "type": "string",
          "title": "商品总金额"
        },
        "promotionDiscount": {
          "type": "string",
          "title": "促销优惠金额"
        },
        "couponDiscount": {
          "type": "string",
          "title": "优惠券优惠金额"
        },
        "shippingFee": {
          "type": "string",
          "title": "运费"
        },
        "finalAmount": {
          "type": "string",
          "title": "最终实付金额"
        },
        "promotions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/cart.v1.PromotionInfo"
          },
          "title": "促销明细"
        },
        "coupon": {
          "$ref": "#/definitions/cart.v1.CouponInfo",
          "title": "优惠券信息"
        },
        "address": {
          "$ref": "#/definitions/cart.v1.AddressInfo",
          "title": "配送地址信息"
        }
      }
    },
    "cart.v1.CheckoutPreviewRequest": {
      "type": "object",
      "properties": {
        "itemIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "选中的购物车项ID（为空则选择全部有效商品）"
        },
        "addressId": {
          "type": "string",
          "title": "配送地址ID（可选）"
        },
        "couponId": {
          "type": "string",
          "title": "优惠券ID（可选）"
        }
      }
    },
    "cart.v1.CheckoutPreviewResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/cart.v1.CheckoutPreviewData"
        }
      }
    },
    "cart.v1.ClearCartResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "cart.v1.CouponInfo": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "discountAmount": {
          "type": "string",
          "title": "优惠金额"
        }
      }
    },
    "cart.v1.GetCartResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/cart.v1.CartItem"
          },
          "title": "购物车商品列表"
        },
        "summary": {
          "$ref": "#/definitions/cart.v1.CartSummary",
          "title": "购物车统计信息"
        }
      }
    },
    "cart.v1.GetCartSummaryResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/cart.v1.CartSummary"
        }
      }
    },
    "cart.v1.PromotionInfo": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "description": "促销类型：FULL_REDUCTION, FULL_DISCOUNT, etc."
        },
        "discountAmount": {
          "type": "string",
          "title": "优惠金额"
        }
      }
    },
    "cart.v1.RemoveItemResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "cart.v1.RemoveItemsRequest": {
      "type": "object",
      "properties": {
        "itemIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "购物车项ID列表"
        }
      }
    },
    "cart.v1.RemoveItemsResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "deletedCount": {
          "type": "integer",
          "format": "int32",
          "title": "删除的数量"
        }
      }
    },
    "cart.v1.UpdateItemQuantityResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/cart.v1.CartItem"
        }
      }
    },
    "google.protobuf.Any": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "google.rpc.Status": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/google.protobuf.Any"
          }
        }
      }
    }
  }
}
