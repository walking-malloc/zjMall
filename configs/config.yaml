services:
  gateway:
    grpc:
      port: 50051
    http:
      port: 8080
  user-service:
    grpc:
      port: 50052
    http:
      port: 8082
  product-service:
    grpc:
      port: 50053
    http:
      port: 8083
  cart-service:
    grpc:
      port: 50054
    http:
      port: 8084
  inventory-service:
    grpc:
      port: 50055
    http:
      port: 8085
  order-service:
    grpc:
      port: 50056
    http:
      port: 8086
  payment-service:
    grpc:
      port: 50057
    http:
      port: 8087
# 服务名到数据库名的映射（可选，如果不配置则使用命名约定）
service_databases:
  user-service: user_db
  product-service: product_db
  cart-service: cart_db
  inventory-service: inventory_db
  order-service: order_db
  payment-service: payment_db

mysql:
  host: 127.0.0.1
  port: 3307
  username: root
  password: root123456
  charset: utf8mb4
  parseTime: true
  max_idle_conns: 10
  max_open_conns: 100
  conn_max_lifetime: 30m
  conn_max_idle_time: 10m

redis:
  host: 127.0.0.1
  port: 6380
  password: "redis123"
  db: 0
  poolSize: 10 
  minIdleConns: 5            # 最小空闲连接数
  dialTimeout: 5              # 连接超时（秒）
  readTimeout: 3             # 读取超时（秒）
  writeTimeout: 3            # 写入超时（秒）

sms:
  code_length: 6
  expire_time: 300
  send_interval: 60
  max_send_count: 20

jwt:
  secret: ""
  expires_in: 168h  # 7 天 (7 * 24 小时)
  remember_me_expires_in: 720h  # 30 天 (30 * 24 小时)

oss:
  endpoint: 
  access_key_id: 
  access_key_secret: 
  bucket_name: 
  base_url: 
  avatar_path: 

ignore_paths:
  - /api/v1/users/register
  - /api/v1/users/login
  - /api/v1/users/login-by-sms
  - /healthz
  - /swagger/

elasticsearch:
  host: http://127.0.0.1:9200


rabbitmq:
  host: 127.0.0.1
  port: 5673
  username: guest
  password: guest
  vhost: "/"
  queue: "cart-sync"   # 购物车事件队列名称

# 服务客户端配置（用于服务间调用）
service_clients:
  product_service_addr: "127.0.0.1:50053"  # 商品服务 gRPC 地址
  inventory_service_addr: "127.0.0.1:50055"  # 库存服务 gRPC 地址
  user_service_addr: "127.0.0.1:50052"  # 用户服务 gRPC 地址
  order_service_addr: "127.0.0.1:50056"  # 订单服务 gRPC 地址
  cart_service_addr: "127.0.0.1:50054"  # 购物车服务 gRPC 地址


nacos:
  host: 127.0.0.1
  port: 8848
  username: nacos
  password: nacos
  namespace: zjmall
