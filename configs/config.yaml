services:
  gateway:
    grpc:
      port: 50051
    http:
      port: 8080
  user-service:
    grpc:
      port: 50052
    http:
      port: 8081
  product-service:
    grpc:
      port: 50053
    http:
      port: 8082
  cart-service:
    grpc:
      port: 50054
    http:
      port: 8083
      
# 服务名到数据库名的映射（可选，如果不配置则使用命名约定）
service_databases:
  user-service: user_db
  product-service: product_db
  cart-service: cart_db


mysql:
  host: 127.0.0.1
  port: 3306
  username: root
  password: root123456
  charset: utf8mb4
  parseTime: true
  max_idle_conns: 10
  max_open_conns: 100
  conn_max_lifetime: 30m
  conn_max_idle_time: 10m

redis:
  host: 127.0.0.1
  port: 6379
  password: "redis123"
  db: 0
  poolSize: 10 
  minIdleConns: 5            # 最小空闲连接数
  dialTimeout: 5              # 连接超时（秒）
  readTimeout: 3             # 读取超时（秒）
  writeTimeout: 3            # 写入超时（秒）

sms:
  code_length: 6
  expire_time: 300
  send_interval: 60
  max_send_count: 20

jwt:
  secret: "your-secret-key-change-in-production"
  expires_in: 168h  # 7 天 (7 * 24 小时)
  remember_me_expires_in: 720h  # 30 天 (30 * 24 小时)

oss:
  endpoint: "oss-cn-beijing.aliyuncs.com"
  access_key_id: "LTAI5t5eoRxM5CxHYEgYBE2q"
  access_key_secret: "3EOOuFvK38wA92XEhxXsayBQtuXHTF"
  bucket_name: "zjmall88"
  base_url: "https://zjmall88.oss-cn-beijing.aliyuncs.com"
  avatar_path: "avatar"

ignore_paths:
  - /api/v1/users/register
  - /api/v1/users/login
  - /api/v1/users/login-by-sms
  - /healthz
  - /swagger/

elasticsearch:
  host: http://127.0.0.1:9200

rocketmq:
  # RocketMQ 5.x 使用 Proxy 的 gRPC Endpoint（不再是 NameServer）
  endpoint: "127.0.0.1:8081"  # Proxy gRPC 端口（默认 8081）
  # 可选：如果启用了认证，配置 access_key 和 secret_key
  # access_key: ""
  # secret_key: ""
  retry_times: 3  # 发送重试次数（默认值）
  send_msg_timeout: 5  # 发送消息超时（秒，默认值）
  enable_trace: false  # 是否开启消息轨迹
  # 每个服务的生产者组名映射（如果不配置，则使用默认命名：service-name-producer-group）
  service_groups:
    cart-service: "cart-producer-group"
    order-service: "order-producer-group"
    payment-service: "payment-producer-group"
    # 其他服务会自动使用默认命名：service-name-producer-group

# 服务客户端配置（用于服务间调用）
service_clients:
  product_service_addr: "127.0.0.1:50053"  # 商品服务 gRPC 地址