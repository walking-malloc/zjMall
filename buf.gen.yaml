version: v1
managed:
  enabled: true
  go_package_prefix:
    default: zjMall/api/proto/gen/go
plugins:
  - plugin: buf.build/protocolbuffers/go
    out: gen/go
    opt:
      - paths=source_relative
  - plugin: buf.build/grpc/go
    out: gen/go
    opt:
      - paths=source_relative
  - plugin: buf.build/grpc-ecosystem/gateway
    out: gen/go
    opt:
      - paths=source_relative
      - generate_unbound_methods=true
  # 使用本地插件（需要 protoc-gen-openapiv2 在 PATH 中）
  # 每个服务生成独立的 swagger 文档（不合并）
  # 注意：title/description/version 在代码中动态设置（见 server.RegisterSwagger）
  - plugin: openapiv2
    out: docs/openapi/temp
    opt:
      - fqn_for_openapi_name=true


